% Profondeur toc
\setcounter{tocdepth}{5}

% Gestion automatique des figures
\newcommand{\doConvert}[2]{\immediate\write18{convert #1 -quality 50 -resample %
  300x300 -resize #2 #1.rs}}
  
\newcommand{\imgRs}[4]{\doConvert{#1.#2}{#3x#4}%
  \includegraphics[type=#2, ext=.#2.rs, read=.#2.rs]{#1}%
}

% Fonction de définition des frises
\newcount\fint
\newcommand{\frise}[1]{% need this to prevent extra vertical space
    \fint=0
    \loop
        % increment dummy counter
        \advance\fint by 1
        %\char"2767\char"2619
        \pgfornament[width=3.5cm]{86}
        % repeat the loop provided the counter is within specified bound
        \ifnum\fint<#1
    \repeat
}

% Table des matières par chapitre
\newcommand{\chaptertoc}[1][Plan du chapitre]{%
\deftocheading{toc}{}%
\par\hrule\vskip+1em\par%
\localtableofcontentswithrelativedepth{+6}%
\par\vskip+1em\hrule\par}


% Changement de nom
\renewcommand{\listfigurename}{Liste des figures}

% Epigraphe
\renewcommand{\dictumrule}{\vskip+1ex\par}
\renewcommand{\dictumauthorformat}[1]{#1}


% Séparateur notes page
\renewcommand*\footnoterule{\centerline{\pgfornament[width=3.5cm]{86}}\vskip+1.5ex}



% Nouveau flotant carte
\DeclareNewTOC[
  type=carte,
  types=cartes,
  % Définit un flottant associé
  float,
  % Positionement par défaut du flottant
  floatpos=hbp,
  name=Carte,
  listname={Liste des cartes},
  counterwithin=chapter,
  % Même paramétrage que 
  % listoffigures
  hang=2.3em
  ]{lomf}

% Nouveau flotant code
\DeclareNewTOC[
  type=code,
  types=codes,
  % Définit un flottant associé
  float,
  % Positionement par défaut du flottant
  floatpos=hbp,
  name={Extrait de code},
  listname={Liste des extraits de code},
  counterwithin=chapter,
  % Même paramétrage que 
  % listoffigures
  hang=2.3em
  ]{lomc}

\renewcommand{\glspluralsuffix}{}

% Macros

\newcommand\eg{\emph{e.g.\ }}
\newcommand\ie{\emph{i.e.\ }}

% Pour les retranscriptions
\renewcommand*\DialogueLabel[1]{%
  \scshape\lowercase{#1}~:\hfil
}

\newcommand\Req{\speak{\makebox[3pt]{R.}\,}}
\newcommand\Sec{\speak{\makebox[3pt]{S.}\,}}
\newcommand\CRec{\direct{Enregistrement coup\'e}}
%\newcommand\CRec{\texhelp{Enregistrement coup\'e}}
