Une fois que la \emph{métrique} identifiée pour la
\emph{spatialisation} de la \emph{relation de localisation atomique} a
été calculée, il est nécessaire de la \emph{fuzzyfier} pour construire
la \emph{zone de localisation compatible.} Comme nous l'expliquions
lors de la définition de la \emph{méthode de spatialisation}
(\autoref{chap:07-sec1}), la \emph{fuzzyfication} a deux rôles, le
premier ---~illustré par la
\autoref{fig:Exemple_Metrique_vs_Selecteur}~--- consiste à
sélectionner les pixels pour lesquels la valeur de la \emph{métrique}
correspond à ce qui est attendu au sein de la \ac{zlc}, le second est
produire une \emph{zone de localisation compatible} floue,
transcrivant \emph{l'imprécision} de la \emph{relation de localisation
  atomique.}

\subsection{la méthode de \emph{fuzzyfication}}

Un simple filtre binaire, comme celui utilisé pour l'exemple de la
\autoref{fig:Exemple_Metrique_vs_Selecteur}, ne permet pas de remplir
ces deux fonctions, nous devons donc étendre cette méthode pour lui
permettre de générer des \ac{zlc} floues. Pour ce faire on peut se
tourner vers la sélection floue

La \autoref{fig:importance_fuzzyfication} présente une version
améliorée de l'exemple de la
\autoref{fig:Exemple_Metrique_vs_Selecteur}. La \emph{métrique} a été
remplacée par la distance euclidienne
%
Les valeurs de la \emph{métrique} sont alors filtrées à l'aide de deux
fonctions d'appartenance, transformant les valeurs de la
\emph{métrique} \footnote{Dont le domaine est \(\mathbb{R}^+\).} en un
\emph{degré d'appartenance.} La première \emph{fonction
  d'appartenance} (définissant la \ac{zlc}
\textcolor{RdBu-9-1}{\textsf{A}}) attribue un degré d'appartenance
maximal lorsque la distance \footnote{Exprimée en centimètres à
  l'échelle de la feuille.} est inférieure ou égale à
\SI{0,25}{\centi\meter} (soit le côté d'un pixel), puis le degré
d'appartenance décroit jusqu'à atteindre 0 lorsque la distance est de
\SI{2}{\centi\meter} ou plus. La seconde \emph{fonction
  d'appartenance} (cf. \ac{zlc} \textcolor{RdBu-9-9}{\textsf{B}})
attribue un degré nul jusqu'à un éloignement de
\SI{0,75}{\centi\meter}, puis croit jusqu'à atteindre la valeur de 1
pour les éloignements supérieurs ou égaux à
\SI{1,50}{\centi\meter}. Comme on peut le constater, les \emph{zones
  de localisation compatibles}, \textcolor{RdBu-9-1}{\textsf{A}} et
\textcolor{RdBu-9-9}{\textsf{B}}, résultant de ces deux
\emph{fuzzyfications} ont une structure spatiale différente, pouvant
approcher la sémantique de certaines \emph{relations de localisation
  atomiques.} La \emph{zone de localisation compatible}
\textcolor{RdBu-9-1}{\textsf{A}} peut, par exemple, être rapprochée de
la sémantique de la \emph{relation de localisation atomique}
\onto[orla]{Pres\-De}, alors que la \ac{zlc}
\textcolor{RdBu-9-9}{\textsf{B}} renvoie plutôt à une modélisation
floue d'une \emph{relation} telle que \onto[orla]{Exterieur\-De}.
%
Ainsi, comme le montre cet exemple, on peut étendre la logique de
\emph{spatialisation} en trois étapes utilisée pour construire la
\autoref{fig:Exemple_Metrique_vs_Selecteur} à un cadre flou.

% forme = sémantique, seuils = implémentation
Une autre conclusion que l'on peut tirer de la
\autoref{fig:importance_fuzzyfication} est la faible importance de la
valeur des seuils, comparativement à la forme globale de la
\emph{fonction d'appartenance.}



Comme nous le mentions précédemment (\autoref{chap:05}), le choix de
la forme de la fonction d'appartenance est essentiel à la
\emph{spatialisation,} puisqu'il
%
Ainsi, la sémantique est dans la forme de la fonction d'appartenance.
%
La question de la définition des seuils de la fonction d'appartenance
utilisée est également importante. Toutefois, il s'agit

\begin{figure}
  \centering
  \input{../figures/importance_fuzzyfication.tex}
  \caption{Illustration de la construction de \emph{zones de
      localisation compatibles} à partir d'une même \emph{métrique} et
    de \emph{fuzzyficateurs} différents.}
  \label{fig:importance_fuzzyfication}
\end{figure}

\subsection{Les différents \emph{fuzzyficateurs}}

Nous proposons la définition de trois fonctions de
\emph{fuzzyfication} principales, déclinées en plusieurs variantes,
portant le total des \emph{fuzzyficateurs} à sept.

Le premier d'entre-eux est le \emph{fuzzyficateur} \onto{Eq\-Val}, qui
défini une fonction d'appartenance triangulaire (Figure
\ref{fig:select_eqval_b}). L'objectif de ce \emph{fuzzyfieur} est de
décrire des situations où la \emph{zone de localisation compatible}
est définie par un ensemble de pixels dont la valeur de la métrique
est égale à une valeur donnée. C'est par exemple le cas pour une
\emph{relation de localisation atomique} comme
\onto[orla]{Distance\-Quantitative\-Planimétrique}, définissant une
\ac{zlc} située à un éloignement donné de \emph{l'objet de référence}
(\eg \enquote{à \SI{50}{\meter}}), ou pour la \emph{relation}
\onto[orla]{Alt\-Eq}, définissant une \ac{zlc} située à une altitude
donnée. La forme triangulaire de cette \emph{fonction d'appartenance,}
permet d'attribuer un degré d'appartenance non nul aux pixels ayant
une valeur de la \emph{métrique} proche de celle attendue. Ainsi, si
l'on souhaite construire la \ac{zlc} à 100 mètres de \emph{l'objet de
  référence,} on pourra, en fonction des seuils fixés, inclure des
positions situées à 75 ou 110 mètres de \emph{l'objet de référence.}
De la même manière ce \emph{fuzzyfieur} permet de prendre en
considération des pixels situés au dessus, ou en dessous, d'une
altitude donnée. La \enquote{largeur} de la fonction est définie par
un paramètre \(delta\), indiquant l'écart entre XX et XX. Ce paramètre
définit les seuils

La fonction d'appartenance du \emph{fuzzyfieur} \onto{Eq\-Val} est
donc définie de la manière suivante :

\begin{equation}
  \label{eq:eq_val}
  \def\arraystretch{1.35}
  f(x,v,\delta) = \left\{
    \begin{array}{cl}
      \dfrac{x - x_1}{\Delta x} & \text{si}\ v - \frac{\delta}{2} ≤ x ≤ v\\
      \dfrac{x_2 - x}{\Delta x} & \text{si}\ v ≤ x ≤ v + \frac{\delta}{2}\\
      0 & \text{si}\ x < v-\frac{\delta}{2}\ \text{ou}\ x > v+\frac{\delta}{2}\\
    \end{array}
  \right.
\end{equation}

Avec \(x\) la valeur de la \emph{métrique,} \(v\) la valeur de
référence et \(\delta\) l'écart xxx.

Au fil de la \emph{spatialisation} de nouvelles \emph{relations de
  localisation atomiques} il s'est avéré que nous recourions
fréquemment à des métriques relatives, comme la différence d'altitude
par rapport à \emph{l'objet de référence,} c'est pourquoi nous avons
construit un second \emph{fuzzyfieur,} \onto{EqVal0}, spécialisant le
premier \autoref{fig:select_eqval_0}. Il s'agit également d'une
\emph{fonction de fuzzyfication} triangulaire et symétrique, dont la
\enquote{largeur} est définie par un paramètre \(\delta\). Cependant
son paramètre \(v\), indiquant la valeur de la \emph{métrique} sur
laquelle la courbe est centrée est fixé à 0, sa fonction
d'appartenance est donc : \(f(x,\delta) = f(x,0,\delta)\). Nous avons
également défini une seconde variante de ce \emph{fuzzyfieur,}
\onto{Eq\-Angle}, fortement similaire à \onto{Eq\-Val}, mais destinée
aux cas spécifiques où la \emph{métrique} est un angle. Ce
\emph{fuzzyfieur} permet donc de traiter ces valeurs en prenant en
compte leur périodicité. \todo{Ce sélecteur ne devrait pas exister,
  c'est à la fonction python d'identifier si ce qu'on lui donne est
  angulaire ou non, pas à l'ontologie. Voir si je l'enlève}.

\begin{figure}
  \centering
  \subfloat[\emph{Fonction d'appartenance} pour \texttt{Eq\-Val}]{
    \input{../figures/fnc_eq_val.tex}
    \label{fig:select_eqval_b}
  }
  
  \subfloat[\emph{Fonction d'appartenance} pour \texttt{Eq\-Val\-0}]{
    \input{../figures/fnc_eq_val.tex}
    \label{fig:select_eqval_0}
  }\hfill  
  \subfloat[\emph{Fonction d'appartenance} pour \texttt{Eq\-Angle}]{
    \input{../figures/fnc_eq_val.tex}
    \label{fig:select_eqval_ang}
  }  
  \caption{\emph{Fonctions d'appartenance} du \emph{fuzzyficateur}
    \protect\onto{Eq\-Val} et de ses dérivés \protect\onto{Eq\-Val\-0}
    et \protect\onto{Eq\-Angle}.}
  \label{fig:select_eqval}
\end{figure}

Le second \emph{fuzzyfieur,} \onto{Sup\-Val}, est destiné à
représenter des situations où les valeurs de la \emph{métrique}
doivent être supérieures à un seuil \(v\). On considère que toutes les
valeurs supérieures ou égale à ce seuil ont un degré d'appartenance
maximal. À l'inverse on tolère des valeurs inférieures à ce seuil,
dans la mesure d'un paramètre \(\delta\). Ce \emph{fuzzyfieur} prend
la forme d'une fonction d'appartenance linéaire (Figure
\ref{fig:select_supval_b}), dont l'équation est :

% \dfrac{\Delta y}{\Delta x}x + \dfrac{x_2y_1 - x_1y_2}{\Delta x}

\begin{equation}
  \label{eq:sup_val}
  \def\arraystretch{1.25}
  f(x,v,\delta) = \left\{
    \begin{array}{cl}
      1 & \text{si}\ x > v \\
      \dfrac{x - x_1}{\Delta x} & \text{si}\  v - \delta ≤ x ≤ v \\
      0 & \text{si}\ x < v - \delta\\
    \end{array}
  \right.
\end{equation}

Avec \(x\) la valeur de la \emph{métrique,} \(v\) la valeur référence
et \(\delta\) xxxxx. Comme pour le \emph{fuzzyfieur} \onto{Eq\-Val}
une variante de ce \emph{fuzzyficateur,} dont la \emph{valeur de
  référence} (\(v\)) est fixée à 0 a été définie,
\onto{Sup\-Val\-0}. Sa \emph{fonction d'appartenance} est :
\(f(x,\delta) = f(x,0,\delta)\).

\begin{figure}
  \centering
  \subfloat[\emph{Fonction d'appartenance} pour \texttt{Sup\-Val}]{
    \input{../figures/fnc_sup_val.tex}
    \label{fig:select_supval_b}
  }\hfill
  \subfloat[\emph{Fonction d'appartenance} pour \texttt{Sup\-Val\-0}]{
    \input{../figures/fnc_sup_val.tex}
    \label{fig:select_supval_0}
  }
  \caption{\emph{Fonctions d'appartenance} du \emph{fuzzyficateur}
    \protect\onto{Sup\-Val} et de son dérivé
    \protect\onto{Sup\-Val\-0}.}
  \label{fig:select_supval}
\end{figure}

Le dernier \emph{fuzzyfieur,} \onto{Inf\-Val}, est l'exact opposé de
\onto{Sup\-Val}. Son objectif est de représenter des situations où
l'on souhaite sélectionner les pixels dont la \emph{métrique} est
inférieure à un seuil \(v\), donné. Toutes les valeurs inférieures à
ce seuil ont un degré d'appartenance maximal, qui diminue linéairement
lorsque la valeur de la métrique dépasse le seuil \(v\), jusqu’à
devenir nul à \(v+\delta\). Ce \emph{fuzzyfieur} est défini à l'aide
de la fonction d'appartenance suivante :

\begin{equation}
  \label{eq:inf_val}
  \def\arraystretch{1.25}
   f(x,v,\delta) = \left\{
    \begin{array}{cl}
      1 & \text{si}\ x < v  \\
      \dfrac{x_2-x}{\Delta x} & \text{si}\ v ≤ x ≤ v + \delta \\
      0 & \text{si}\ x < v + \delta\\
    \end{array}
  \right.
\end{equation}

Où \(x\) est la valeur de la \emph{métrique,} \(v\) la valeur
référence et \(\delta\) l'écart xxx. De la même manière que les autres
\textrm{fuzzyfieurs,} \onto{Inf\-Val} dispose d'une variante,
\onto{Inf\-Val\-0} dont la \emph{valeur de référence} (\(v\)) est
fixée à 0. Son équation est donc : \(f(x,\delta) = f(x,0,\delta)\).

\begin{figure}
  \centering
  \subfloat[\emph{Fonction d'appartenance} pour \texttt{Inf\-Val}]{
    \input{../figures/fnc_inf_val.tex}
  }\hfill
  \subfloat[\emph{Fonction d'appartenance} pour \texttt{Inf\-Val\-0}]{
    \input{../figures/fnc_inf_val.tex}
  }
  \caption{\emph{Fonctions d'appartenance} du \emph{fuzzyficateur}
    \protect\onto{Inf\-Val} et de son dérivé
    \protect\onto{Inf\-Val\-0}.}
  \label{fig:select_infval}
\end{figure}

\subsection{Les \emph{modifieurs}}

La seule utilisation des \emph{fuzzyfieurs} définis jusqu'à présent ne
permet cependant pas de traiter toutes les situations possibles. En
effet, il n'est pas vraiment possible de formaliser des \emph{indices
  de localisation} ayant une tournure négative (\eg \enquote{Je ne
  suis pas au niveau du plateau}) ou utilisant des approximations (\eg
\enquote{Elle est presque à côté de moi}). Certes, certaines
\emph{relations de localisation atomiques} ont des opposés (\eg
\onto[orala]{Iterieur} et \onto[orala]{Exterieur}), mais il s'agit de
cas particuliers et il est, par exemple, impossible de définir une
\emph{zone de localisation compatible} à partir de ce qui n'est pas
vu, ou qui n'est pas à la même altitude \footnote{Il n'existe pas de
  \emph{relations} \onto[orla]{Site\-Ne\-Voit\-Pas\-Cible} ou
  \onto[orla]{Pas\-A\-La\-Meme\-Altitude\-Que}.}. Pourtant, ces cas
seraient modélisables avec les \emph{rasterisers} et les
\emph{métriques} déjà définies, seuls de nouveau \emph{fuzzyficateurs}
seraient à définir.

C'est pour traiter ces situations que nous avons développé la notion
de \emph{modifieurs.} Les \emph{modifieurs} sont ---~de la même que
les \emph{rasterisers,} les \emph{métriques} et les
\emph{fuzzyficateurs}~--- des concepts formalisant la sémantique d'une
\emph{relation spatiale atomique} et correspondant à un algorithme
appliqué lors de la \emph{phase de spatialisation.} Cependant, ils
possèdent la particularité d'être facultatifs, la plupart des
\emph{relations de localisation atomiques} en sont dépourvues, et
cumulatifs, une même \emph{relation} pouvant en utiliser
plusieurs. Les \emph{modifieurs} sont appliqués à la fin de la
\emph{spatialisation} (\autoref{fig:methodo_spatialisation}), après la
\emph{fuzzyfication.}  Dans cette configuration la \emph{zone de
  localisation compatible} n'est donc pas le résultat de la
\emph{fuzzyfication} \footnote{Comme l'indique la
  \autoref{fig:methodo_spatialisation}, qui présente la \emph{méthode
    de spatialisation} sans modifieurs.}, mais de l’application des
\emph{modifieurs} au résultat de la \emph{fuzzyfication.} Les
\emph{modifieurs} modifient les \emph{degrés d'appartenance} issus de
la phase de \emph{fuzzyfication,} de manière à modifier la \emph{zone
  de localisation compatible.} Ils n'agissent donc pas directement sur
la forme de la \emph{fonction d'appartenance} définie par le
\emph{fuzzyficateur,} mais sur les \emph{degrés d'appartenance}
résultant de son application. Toutefois cette opération est
équivalente à un changement de \emph{fonction d'appartenance.} Ainsi,
ce \emph{modifieur} peut être utilisé pour simuler un changement de
forme de la \emph{fonction d'appartenance.}

Le premier (et le plus utilisé) des \emph{modifieurs} développés et le
\emph{modifieur} \onto{Not}. Sa fonction est de permettre la
définition de l'opposée d'une \emph{relation de localisation
  atomique.} Par exemple, si l'on applique ce \emph{modifieur} à la
\emph{relation de localisaiton atomique}
\onto[orla]{A\-La\-Frontiere\-De}, on obtiendra son opposée,
c'est-à-dire une \emph{relation de localisation atomique,} que l'on
pourrait appeler \onto[orla]{Not\-A\-La\-Frontiere\-De}, qui serait
\emph{spatialisable} en vérifiant si, pour chaque pixel de la
\ac{zir}, l'assertion \enquote{Est-ce que la \emph{relation de
    localisation} \onto[orla]{A\-La\-Frontiere\-De} est vraie} est
fausse. Or, puisque l'on sait comment construire la \ac{zlc}
correspondant à la \emph{relation de localisation}
\onto[orla]{A\-La\-Frontiere\-De}, on peut, en prenant le
complémentaire de la \emph{zone de localisation,} construire la
\ac{zlc} correspondant à la \emph{relation de localisation atomique}
\onto[orla]{Not\-A\-La\-Frontiere\-De}. Comme nous l'expliquions dans
le \autoref{eq:comp} (\autoref{chap:03}), le complémentaire d'un
\emph{sous-ensemble flou} peut-être construit en soustrayant le degré
d'appartenance de chaque élément de l'ensemble (ici les pixels) à
1. Cette démarche est parfaitement équivalente à la définition de
nouveaux \emph{fuzzyficateurs,} opposés à ceux précédemment définis
(\autoref{fig:fnc_not}). Ainsi, appliquer le \emph{modifieur}
\onto{Not} au résultat d'une \emph{spatialisation} employant le
\emph{fuzzyficateur} \onto{Eq\-Val} équivaut à utiliser directement un
hypothétique \emph{fuzzyficateur} \onto{Not\-Eq\-Val} (Figure
\ref{fig:fnc_not_eq_val}).

\begin{figure}
  \centering
  \subfloat[\emph{Fonction d'appartenance} pour \texttt{Eq\-Val} avec
  le \emph{modifieur} \texttt{Not}]{
    \input{../figures/fnc_not_eq_val.tex}
    \label{fig:fnc_not_eq_val}
  }
  
  \subfloat[\emph{Fonction d'appartenance} pour \texttt{Sup\-Val} avec
  le \emph{modifieur} \texttt{Not}]{
    \input{../figures/fnc_not_sup_val.tex}
    \label{fig:fnc_not_sup_va}
  }\hfill  
  \subfloat[\emph{Fonction d'appartenance} pour \texttt{Inf\-Val} avec
  le \emph{modifieur} \texttt{Not}]{
    \input{../figures/fnc_not_inf_val.tex}
    \label{fig:fnc_not_inf_va}
  }  
  \caption{Fonctions d'appartenance des \emph{fuzzyfieurs}
    \protect\onto{Eq\-Val}, \protect\onto{Sup\-Val}, et
    \protect\onto{Inf\-Val} après application du \emph{modifieur}
    \protect\onto{Not}.}
  \label{fig:fnc_not}
\end{figure}

De nombreux autres \emph{modifieurs} sont envisageables, notamment
pour permettre une meilleure modélisation des \emph{indices de
  localisation} contenant des XXXX tels que \enquote{Je suis presque
  en face du barrage}, \enquote{Nous sommes juste en dessous de la
  route}, \emph{etc.} L'utilisation de XXX, tels que \enquote{juste}
ou \enquote{presque} a pour but de nuancer le propos et donc d'affiner
la description d'une position. Par conséquent, les \ac{zlc} issues de
la \emph{spatialisation} de tels \emph{indices de localisation}
doivent se voir légèrement modifiées, de manière à retranscrire la
sémantique des XX. 

Le second \emph{modifieur} que nous ayons défini, \onto{Resampling}, a
un rôle plus générique que \onto{Not}. Son but est de servir de
support à la définition de nouveaux \emph{modifieurs} plus
spécifiques, à l'image de \onto{Not}.
%
Il permet la définition d'une Les nouvelles valeurs du \emph{degré
  d'appartenance} sont alors calculées à l'aide d'une interpolation
linéaire entre ces couples de points.

\begin{figure}
  \centering
  \includegraphics[width=\textwidth]{../../../../tmp/modifieur.jpeg}
  \caption{Modifieur}
  \label{fig:methode_modifieur}
\end{figure}

% Ordre modifieurs
La possibilité de cumuler plusieurs \emph{modifieurs} pose un problème
jusqu'ici inédit, celui de l'influence de l'ordre du traitement sur le
résultat final. En effet si une \emph{relation de localisation
  atomique} fait appel aux \emph{modifieurs} \onto{Not} et
\onto{Reseampling} il est nécessaire d'évaluer lequel s'applique en
premier, puisque la 

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../../../../main"
%%% End:
